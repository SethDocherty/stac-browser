const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Description-DbvdRsRD.js","assets/_commonjsHelpers-CE1G-McA.js","assets/index-BYZh1Z27.js","assets/utils-UTZ1_q7B.js","assets/I18N-DlIXJTel.js","assets/index-tJa7Rfc7.css","assets/Description-BJNSZaWm.css","assets/vue-multiselect.esm-1VJTgf4c.js"])))=>i.map(i=>d[i]);
import{a4 as P,n as l,B as _,y as f,bk as C,bl as m,H as d,G as o,L as p,q as u,I as B,ax as N,p as s,v as h,K as b,_ as S,bt as k,bu as V}from"./index-BYZh1Z27.js";import{a as F}from"./BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-Dx_mpGFE-DjJo_niB.js";import{_ as U}from"./BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d-DX2ROLIv.js";import{b as j}from"./BFormSelect.vue_vue_type_script_setup_true_lang-djrVhugk-BVdf3RVC.js";import{_ as z}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-DTnAWqVO.js";import{b as E,_ as M}from"./BDropdownText.vue_vue_type_script_setup_true_lang-Cm6QYE9x-BMswHdeY.js";import{D as R,C as y}from"./SearchFilter-B0JhVxqD.js";import{j as Q}from"./utils-UTZ1_q7B.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-BcoctRAD.js";import"./useStateClass-BGbSLWFN-DFAtRDLH.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--DXHzJ5zz.js";import"./debounce-BHqBzJ1a-BiIO1ylu.js";import"./BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-B_Hr3f5m.js";import"./BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-Co2h584p.js";import"./BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-CXYKXBEl.js";import"./startOfWeek-m7vVpAR3.js";import"./en-US-DRXoBfJp.js";import"./match-DN4VZKeM.js";import"./buildMatchPatternFn-_eSDZv-o.js";import"./Loading-BxPZ0Xgr.js";import"./helper-CaHhXSPV.js";import"./helper-DO3U350M.js";const G={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function H(a,e){return l(),_("svg",G,[...e[0]||(e[0]=[f("path",{fill:"currentColor",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"},null,-1)])])}const K=P({name:"bi-x-circle-fill",render:H}),Y={name:"QueryableInput",components:{BDropdown:M,BDropdownItemButton:E,Description:k(()=>V(()=>import("./Description-DbvdRsRD.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Multiselect:k(()=>V(()=>import("./vue-multiselect.esm-1VJTgf4c.js"),__vite__mapDeps([7,2,3,1,4,5])))},mixins:[R],props:{value:{},operator:{type:Function,required:!0},queryable:{type:Object,required:!0},cql:{type:Object,required:!0}},emits:["remove-queryable","update:value","update:operator"],computed:{validation(){return this.queryable.isText?{type:"text",minlength:this.schema.minLength,maxlength:this.schema.maxLength,required:this.schema.minLength>0}:this.queryable.isNumeric?{type:"number",number:!0,min:this.schema.minimum,max:this.schema.maximum,step:this.schema.multipleOf||"any"}:{}},schema(){return this.queryable.schema},operators(){return this.queryable.getOperators(this.cql)},queryableOptions(){return this.queryable.isSelection?this.schema.enum.map(a=>({value:a,text:a})):[]},arrayValues:{get(){return(this.value?.value||[]).map(e=>String(e))},set(a){const e=a.map(t=>this.coerceArrayItem(t));this.$emit("update:value",y.create(e))}}},methods:{iterateOps(){let a=this.operators.findIndex(t=>t===this.operator),e=++a%this.operators.length;this.updateOperator(this.operators[e])},updateValue(a){let e=Q.isObject(a)&&"target"in a?a.target.value:a;typeof e=="string"&&this.queryable.is("integer")?e=parseInt(e,10):typeof e=="string"&&this.queryable.is("number")&&(e=parseFloat(e)),this.$emit("update:value",y.create(e))},updateOperator(a){this.$emit("update:operator",a)},addArrayValue(a){const e=this.coerceArrayItem(a.trim()),t=this.value?.value||[];this.$emit("update:value",y.create([...t,e]))},onArrayPaste(a){const e=a.clipboardData||window.clipboardData;if(!e)return;const t=e.getData("text");if(!t||!t.includes(","))return;a.preventDefault();const g=t.split(",").map(n=>n.trim()).filter(n=>n!==""),v=this.value?.value||[],r=new Set(v.map(String)),c=g.filter(n=>!r.has(n)).map(n=>this.coerceArrayItem(n));c.length>0&&this.$emit("update:value",y.create([...v,...c]))},coerceArrayItem(a){const e=this.queryable?.schema?.items?.type;if(e==="integer"){const t=parseInt(a,10);if(!Number.isNaN(t)&&String(t)===a)return t}else if(e==="number"){const t=parseFloat(a);if(Number.isFinite(t))return t}return a}}},J={class:"queryable-group"},W={class:"queryable-row"},X={class:"title"},Z={key:0,class:"queryable-help text-muted small"};function $(a,e,t,g,v,r){const c=z,n=m("b-dropdown-item-button"),x=m("b-dropdown"),D=m("VueDatePicker"),w=j,I=U,O=m("multiselect"),A=F,T=K,L=S,q=m("Description");return l(),_("div",J,[f("div",W,[f("span",X,d(t.queryable.title),1),e[6]||(e[6]=o()),p(x,{size:"sm",class:"op",variant:"dark",split:"",text:t.operator.label,onClick:r.iterateOps},{default:u(()=>[(l(!0),_(B,null,N(r.operators,i=>(l(),s(n,{key:i.SYMBOL,active:i===t.operator,onClick:ee=>r.updateOperator(i),"button-class":"d-flex justify-content-between align-items-center"},{default:u(()=>[f("span",null,d(i.longLabel),1),e[5]||(e[5]=o()),p(c,{variant:"dark",class:"ms-2"},{default:u(()=>[o(d(i.label),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1},8,["text","onClick"]),e[7]||(e[7]=o()),t.queryable.isTemporal?(l(),s(D,{key:0,class:"value","model-value":t.value?.value,"onUpdate:modelValue":r.updateValue,locale:a.datepickerLang,"week-start":a.weekStartDay,formats:{input:t.queryable.isDateTime?a.dateTimeFormat:a.dateFormat},"close-on-scroll":!1,"time-config":{enableTimePicker:t.queryable.isDateTime,seconds:t.queryable.isDateTime,timePickerInline:!0},"input-attrs":{clearable:!0},"auto-apply":""},null,8,["model-value","onUpdate:modelValue","locale","week-start","formats","time-config"])):t.queryable.isSelection?(l(),s(w,h({key:1,options:r.queryableOptions,size:"sm",class:"value","model-value":t.value.value,"onUpdate:modelValue":e[0]||(e[0]=i=>r.updateValue(i))},r.validation),null,16,["options","model-value"])):t.queryable.isText||t.queryable.isNumeric?(l(),s(I,h({key:2,size:"sm",class:"value","model-value":t.value.value,"onUpdate:modelValue":e[1]||(e[1]=i=>r.updateValue(i))},r.validation),null,16,["model-value"])):t.queryable.isArray?(l(),s(O,{key:3,class:"value",modelValue:r.arrayValues,"onUpdate:modelValue":e[2]||(e[2]=i=>r.arrayValues=i),multiple:!0,taggable:!0,options:r.arrayValues,placeholder:a.$t("search.arrayInput.helpText"),"tag-placeholder":a.$t("search.arrayInput.addValue"),onTag:r.addArrayValue,onPaste:r.onArrayPaste},{noOptions:u(()=>[o(d(a.$t("search.noOptions")),1)]),_:1},8,["modelValue","options","placeholder","tag-placeholder","onTag","onPaste"])):t.queryable.isBoolean?(l(),s(A,h({key:4,switch:"",class:"value","model-value":t.value.value,"onUpdate:modelValue":e[3]||(e[3]=i=>r.updateValue(i))},r.validation),{default:u(()=>[o(d(a.$t(`checkbox.${t.value.value}`)),1)]),_:1},16,["model-value"])):b("",!0),e[8]||(e[8]=o()),p(L,{class:"delete",size:"sm",variant:"danger",onClick:e[4]||(e[4]=i=>a.$emit("remove-queryable"))},{default:u(()=>[p(T,{"aria-hidden":"true"})]),_:1})]),e[10]||(e[10]=o()),t.queryable.description||t.operator.description?(l(),_("div",Z,[t.operator.description?(l(),s(q,{key:0,description:t.operator.description,inline:""},null,8,["description"])):b("",!0),e[9]||(e[9]=o()),t.queryable.description?(l(),s(q,{key:1,description:t.queryable.description,inline:""},null,8,["description"])):b("",!0)])):b("",!0)])}const De=C(Y,[["render",$]]);export{De as default};
//# sourceMappingURL=QueryableInput-DFWZdpve.js.map
