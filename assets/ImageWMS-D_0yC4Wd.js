import{y as u,ap as h,am as m}from"./GeoJSON-BPTypvZI.js";import{c as o}from"./common-oM3VNg4d.js";import d,{defaultImageLoadFunction as l}from"./Image-Bz8B-5EG.js";import{getFeatureInfoUrl as g,getLegendUrl as c,createLoader as _}from"./wms-D3otv1JU.js";import"./index-DxkmsBdF.js";import"./utils-UTZ1_q7B.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-Bgrm5c_H.js";import"./useStateClass-BGbSLWFN-Dclm8Qkt.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--DrCiXEJF.js";import"./resolution-CU8ppKQ3.js";import"./common-9rOs42pz.js";import"./uri-BOy4sXyk.js";import"./tilecoord-DP6aZtxC.js";class M extends d{constructor(r){r=r||{},super({attributions:r.attributions,interpolate:r.interpolate,projection:r.projection,resolutions:r.resolutions}),this.crossOrigin_=r.crossOrigin!==void 0?r.crossOrigin:null,this.url_=r.url,this.imageLoadFunction_=r.imageLoadFunction!==void 0?r.imageLoadFunction:l,this.params_=Object.assign({},r.params),this.serverType_=r.serverType,this.hidpi_=r.hidpi!==void 0?r.hidpi:!0,this.renderedRevision_=0,this.ratio_=r.ratio!==void 0?r.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(r,e,s,a){const t=u(s),i=this.getProjection();i&&i!==t&&(e=o(i,t,r,e),r=h(r,t,i));const n={url:this.url_,params:{...this.params_,...a},projection:i||t};return g(n,r,e)}getLegendUrl(r,e){return c({url:this.url_,params:{...this.params_,...e}},r)}getParams(){return this.params_}getImageInternal(r,e,s,a){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==a)&&(this.loaderProjection_=a,this.loader=_({crossOrigin:this.crossOrigin_,params:this.params_,projection:a,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,i)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,i),m(t))})),super.getImageInternal(r,e,s,a))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(r){this.imageLoadFunction_=r,this.changed()}setUrl(r){r!=this.url_&&(this.url_=r,this.loader=null,this.changed())}setParams(r){this.params_=Object.assign({},r),this.changed()}updateParams(r){Object.assign(this.params_,r),this.changed()}changed(){this.image=null,super.changed()}}export{M as default};
//# sourceMappingURL=ImageWMS-D_0yC4Wd.js.map
